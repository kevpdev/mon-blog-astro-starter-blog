---
description: Astro Blog specific development rules and best practices
alwaysApply: true
---

# Astro Blog Development Rules

## ğŸ—ï¸ Layout Architecture (ENFORCED)

### Layout Hierarchy
```
BaseLayout.astro                    â† Core HTML structure (required)
â”œâ”€â”€ HomeLayout.astro               â† Homepage specific
â”œâ”€â”€ BlogLayout.astro               â† Blog posts with metadata  
â”œâ”€â”€ PageLayout.astro               â† Static content pages
â””â”€â”€ [Custom]Layout.astro           â† New layouts extend BaseLayout
```

**Rules:**
- âœ… **MUST**: All layouts extend `BaseLayout.astro`
- âœ… **MUST**: Use slots for content injection (`<slot />`, `<slot name="head" />`)
- âŒ **NEVER**: Duplicate HTML structure between layouts
- âŒ **NEVER**: Put CSS directly in layouts - use design tokens

### Component Architecture
```
src/components/
â”œâ”€â”€ ui/                            # Pure UI components (Button, Input, Card)
â”œâ”€â”€ layout/                        # Layout helper components (Header, Footer, Navigation)
â””â”€â”€ [feature]/                     # Feature-specific components
```

## ğŸ¨ CSS & Design System (MANDATORY)

### CSS Architecture (Tailwind CSS v4)
```
src/styles/
â”œâ”€â”€ tailwind.css          # @tailwind imports + @layer components
â”œâ”€â”€ design-tokens.css     # CSS variables in RGB format for Tailwind
â””â”€â”€ prose.css            # @tailwindcss/typography customization
```

**Rules:**
- âœ… **MUST**: Use Tailwind utilities by default
- âœ… **MUST**: Use design tokens with `bg-[rgb(var(--bg-primary))]` syntax
- âœ… **MUST**: Use `@layer components` for small reusable classes only
- âœ… **MUST**: Use `@tailwindcss/typography` plugin + `.prose` for blog content
- âœ… **MUST**: Define CSS variables in RGB format: `--brand-primary: 55 65 81`
- âŒ **NEVER**: Write hardcoded hex, rgba, or pixel values in components

### Tailwind CSS v4 Setup
```css
/* src/styles/tailwind.css */
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
  .btn {
    @apply inline-flex items-center gap-2 rounded-md px-4 py-2 text-sm font-medium;
    @apply ring-1 ring-inset transition-all duration-200 focus-visible:outline-none;
    @apply focus-visible:ring-2 focus-visible:ring-offset-2;
  }
  .btn-primary {
    @apply bg-[rgb(var(--brand-primary))] text-white;
    @apply ring-[rgb(var(--brand-primary))] hover:bg-[rgb(var(--brand-primary-hover))];
    @apply focus-visible:ring-[rgb(var(--brand-primary))];
  }
  .btn-secondary {
    @apply bg-[rgb(var(--bg-secondary))] text-[rgb(var(--text-primary))];
    @apply ring-[rgb(var(--border-primary))] hover:bg-[rgb(var(--bg-muted))];
  }
  .card {
    @apply rounded-xl border border-[rgb(var(--border-primary)/0.6)];
    @apply bg-[rgb(var(--bg-primary))] p-6 shadow-sm;
  }
}
```


### Design Token Usage (Tailwind v4)
```css
/* âœ… Correct - CSS Variables */
:root {
  --brand-primary: 55 65 81;        /* RGB format for Tailwind */
  --text-primary: 17 24 39;
  --bg-primary: 255 255 255;
}

/* âœ… Correct - In Tailwind classes */
class="bg-[rgb(var(--bg-primary))] text-[rgb(var(--text-primary))]"
class="border-[rgb(var(--border-primary)/0.6)]"

/* âœ… Correct - In custom CSS */
.custom-component {
  background: rgb(var(--bg-secondary));
  color: rgb(var(--text-primary));
}

/* âŒ Wrong */
color: #333;
background: #f5f5f5;
class="bg-gray-100 text-gray-900" /* Use tokens instead */
```

## ğŸ“± Responsive Design (ENFORCED)

### Mobile-First Approach
```css
/* Base styles for mobile */
.component { /* mobile styles */ }

/* Progressive enhancement */
@media (min-width: 640px) { /* tablet */ }
@media (min-width: 768px) { /* desktop */ }
@media (min-width: 1024px) { /* large desktop */ }
```

**Rules:**
- âœ… **MUST**: Mobile-first styles by default
- âœ… **MUST**: Use Tailwind breakpoints (sm, md, lg, xl)
- âœ… **MUST**: Test on all breakpoints (mobile, tablet, desktop)
- âŒ **NEVER**: Use `max-width` media queries (desktop-first)

```HTML
<div class="p-4 sm:p-6 md:p-8 lg:p-12">
  Responsive padding
</div>
```


## ğŸš€ Astro Best Practices

### Project Architecture
- **Component-based design** with ui/ and layout/ separation
- **Composable layouts** - all extend BaseLayout.astro
- **Config-driven approach** - site.ts, navigation.ts, author.ts
- **TypeScript strict mode** with null checks enabled

### Content Collections
```typescript
// src/content/config.ts - Three collections
export const collections = {
  blog: defineCollection({
    type: 'content',
    schema: blogSchema,        // title, description, pubDate, heroImage, tags
  }),
  pages: defineCollection({
    type: 'content', 
    schema: pageSchema,        // title, description, optional dates
  }),
  footer: defineCollection({
    type: 'data',
    schema: footerSchema,      // social links, legal pages
  })
};
```

### Image Standards
```astro
<!-- âœ… Correct - Hero images -->
<Image
  width={1200}
  height={675}
  src={heroImage}
  alt={`Image de l'article: ${title}`}
  class="w-full h-full object-cover"
/>

<!-- âœ… Correct - Responsive containers -->
<div class="aspect-[2/1] md:aspect-[16/9] overflow-hidden rounded-lg">
  <Image ... />
</div>
```

### SEO & Meta Requirements
- **Hero images**: 1200x675px minimum, 16:9 aspect ratio
- **Meta descriptions**: 140-160 characters
- **Structured data**: JSON-LD for blog posts
- **Canonical URLs**: Always included
- **Sitemap**: Auto-generated with @astrojs/sitemap

## â™¿ Accessibility (WCAG 2.2 AA)

### Semantic HTML
- Use proper HTML5 semantic elements (`header`, `nav`, `main`, `article`, `section`, `footer`)
- One `<h1>` per page, logical heading hierarchy (`h2`â†’`h3`)
- `<button>` for actions, `<a>` for navigation

### ARIA & Labels
- Connect labels to form fields
- Use ARIA attributes sparingly and purposefully
- Ensure visible focus indicators
- Maintain logical tab order

### Color & Contrast
- Meet WCAG contrast requirements (4.5:1 normal text, 3:1 large text)
- Don't rely on color alone to convey information
- Test with screen readers and keyboard navigation

## ğŸ”§ Component Development Template

```astro
---
// Always define TypeScript interface
interface Props {
  title: string;
  variant?: 'primary' | 'secondary' | 'outline';
  size?: 'sm' | 'md' | 'lg';
  className?: string;
}

const { 
  title, 
  variant = 'primary', 
  size = 'md',
  className = '' 
} = Astro.props;
---

<div class={`card card--${variant} card--${size} ${className}`}>
  <header class="card__header">
    <h2 class="heading-lg text-[rgb(var(--text-primary))]">{title}</h2>
  </header>
  <div class="card__content">
    <slot />
  </div>
  <footer class="card__footer">
    <slot name="footer" />
  </footer>
</div>

<style>
  .card {
    /* Use Tailwind-compatible design tokens */
    background: rgb(var(--bg-primary));
    border: 1px solid rgb(var(--border-primary) / 0.6);
    border-radius: 0.75rem;
    box-shadow: 0 1px 3px rgb(0 0 0 / 0.1);
  }
  
  .card--sm { padding: 1rem; }
  .card--md { padding: 1.5rem; }
  .card--lg { padding: 2rem; }
  
  .card--primary {
    border-color: rgb(var(--brand-primary) / 0.2);
  }
  
  /* Mobile-first responsive - use Tailwind breakpoints */
  @media (min-width: 768px) {
    .card--lg { padding: 2.5rem; }
  }
</style>
```

## ğŸš« Anti-Patterns (FORBIDDEN)

### CSS Anti-Patterns
```css
/* âŒ NEVER DO THIS */
@media (max-width: 767px) { /* Desktop-first */ }
color: #333333; /* Use design tokens */
margin: 10px 5px 15px 20px; /* Inconsistent spacing */
!important; /* Indicates architecture problem */
```

### Component Anti-Patterns
```astro
<!-- âŒ NEVER DO THIS -->
<div style="color: red;">                    <!-- Inline styles -->
<img src="..." />                           <!-- Missing alt text -->
<button onclick="...">                      <!-- Inline JavaScript -->
```

## ğŸ“ File Organization

### Directory Structure
```
src/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ui/                        # Reusable UI elements
â”‚   â””â”€â”€ layout/                    # Layout components
â”œâ”€â”€ layouts/
â”‚   â”œâ”€â”€ BaseLayout.astro          # Core layout
â”‚   â””â”€â”€ [Specific]Layout.astro    # Specialized layouts
â”œâ”€â”€ pages/                        # File-based routing
â”œâ”€â”€ content/                      # Content collections
â”‚   â”œâ”€â”€ blog/                     # Blog posts
â”‚   â””â”€â”€ pages/                    # Static pages
â”œâ”€â”€ styles/                       # CSS architecture
â””â”€â”€ config/                       # Configuration files
```

### Naming Conventions
- **Components**: PascalCase (`Navigation.astro`, `SocialLinks.astro`)
- **Layouts**: PascalCase + Layout suffix (`BlogLayout.astro`)
- **Pages**: kebab-case (`about.astro`, `blog-post.astro`)
- **CSS Classes**: kebab-case (`.nav-container`, `.mobile-menu`)
- **CSS Variables**: kebab-case with semantic prefix (`--color-text-primary`)

## âœ… Quality Checklist

Before merging changes:

### Architecture
- [ ] Component follows established patterns
- [ ] No code duplication
- [ ] Uses TypeScript interfaces for props
- [ ] Follows file/folder structure

### Styling  
- [ ] Use Tailwind utilities primarily
- [ ] Use design-tokens.css for colors, spacing & typography
- [ ] Mobile-first responsive verified
- [ ] No inline styles (except dynamic values)
- [ ] Dark mode working

### Content & SEO
- [ ] Proper meta tags (title, description)
- [ ] Semantic HTML structure
- [ ] Accessible markup (ARIA, alt texts)
- [ ] Image optimization with explicit dimensions

### Testing
- [ ] Tested on mobile (320px+)
- [ ] Tested on tablet (640px+)  
- [ ] Tested on desktop (768px+)
- [ ] Navigation works on all screen sizes
- [ ] Accessibility tested (keyboard, screen reader)