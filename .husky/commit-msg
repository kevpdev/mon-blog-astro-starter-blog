#!/bin/sh

# Validation du format des messages de commit
# Le message de commit doit commencer par "feat:" ou "fix:"

commit_file="$1"
commit_msg=$(cat "$commit_file")

# Expression rÃ©guliÃ¨re pour valider le format
commit_regex='^(feat|fix):'

if ! echo "$commit_msg" | grep -qE "$commit_regex"; then
  echo ""
  echo "âŒ Format de commit invalide!"
  echo ""
  echo "ğŸ“‹ Le message de commit doit commencer par:"
  echo "   â€¢ feat: pour une nouvelle fonctionnalitÃ©"
  echo "   â€¢ fix:  pour une correction de bug"
  echo ""
  echo "ğŸ“ Exemples valides:"
  echo "   feat: add search functionality"
  echo "   fix: resolve navigation mobile issue"
  echo ""
  echo "ğŸš« Message reÃ§u: $commit_msg"
  echo ""
  exit 1
fi

echo "âœ… Format de commit valide: $commit_msg"